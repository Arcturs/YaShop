# YaShop
Реализация проектного задания для школы бэкенд разработки Яндекса 2022

## Описание
Бэкенд для веб-сервиса сравнения цен, аналогичный сервису [Яндекс Товары](https://yandex.ru/products). Обычно взаимодействие с такими сервисами происходит следующим 
образом:

- Представители магазинов загружают информацию о своих товарах и категориях. Также можно изменять и удалять информацию о ранее загруженных товарах и категориях.
- Покупатели, пользуясь веб-приложением, могут искать предложения разных магазинов, сравнивать цены и следить за их динамикой и историей.

## Используемые технологии:
- Spring boot фреймворк;
- Maven для сборки;
- Spring Security;
- PostgreSQL БД;
- Liquibase для миграций;
- Swagger документация (реализована через OpenAPI);
- Testcontainers для создания БД для интеграционного теста. 

## Запуск
Данное приложение уже реализовано и работает на виртуальной машине. Доступ осуществляется по адресу: https://sir-1826.usr.yandex-academy.ru. Следующие подпункты описывают
ход установки и настройки работы приложения.

### Необходимые технологии
Для работы приложения понадобится только [Docker](https://www.docker.com/). Для запуска тестов необходимо помимо докера установить:
- [Java](https://www.oracle.com/java/technologies/downloads/#java17) 17 версии;
- [Maven](https://maven.apache.org/download.cgi) последней версии.

### Запуск приложения
Для запуска необходимо в папке скачанного проекта в командной строке написать следующую команду:
```
docker-compose up -d
```
Обратите внимание, чтобы пользователь системы, который запускает проект, имел доступ к вызовам команд docker.
Через некоторое время приложение запуститься, оно будет развернуто на 0.0.0.0:80 (или же localhost:80).

## Swagger
Ознакомиться с эндпоинтами, а также протестировать их работу можно по следующим адресам:
- https://sir-1826.usr.yandex-academy.ru/swagger-ui.html (в случае ВМ)
- http://localhost:80/swagger-ui.html (по дефолту)

## Тестирование
Для тестирования основного функционала приложения реализовано два класса юнит тестов и один класс интеграционных тестов. Рассмотрим классы юнит тестов.
Для запуска тестирования класса по валидации данных, передаваемых внутри или как параметры запроса, необходимо в папке проекта выполнить следующую команду:
```
mvn test -Dtest="PathVariablesAndParamsValidationServiceTest"
```
Для запуска тестирования сервиса, отвечающего за основной функционал приложения:
```
mvn test -Dtest="ShopUnitServiceTest"
```
Перед запуском интеграционного теста или всех тестов, убедитесь, что пользователь системы может вызывать команды docker. Для запуска интеграционного теста для класса
контроллера, необходимо выполнить в командной строке:
```
mvn test -Dtest="ShopUnitControllerIT"
```
Для запуска всех тестов:
```
mvn test
```
